destdat = read.excel("destination_data20231122.xlsx")
install.packages("libxls")
library(libxls)
install.packages("libxls")
library(libxls)
library("libxls")
destdat = read.excel("destination_data20231122.xlsx")
destdat = read.csv("destination_data20231122.csv")
setwd("C:/Users/breni/OneDrive/Documents/GitHub/TSWD-Report23/citydat")
destdat = read.csv("destination_data20231122.csv")
mcesdat = read.csv("mces_data20231122.csv")
surveydat = read.csv("survey_data20231122.csv")
solutionfunddat = read.csv("solutions_fund20231122.csv")
View(destdat)
#Exploring housing destinations and rapidity of housing allocation for veterans.
library(dplyr)
#Exploring housing destinations and rapidity of housing allocation for veterans.
library(dplyr)
library(ggplot2)
library(ggplot2)
library(dplyr)
library(ggplot2)
View(mcesdat)
mcesdatclean = mcesdat %>%
filter(!is.na('Entry.Date') & !is.na('Exit.Date'))
durationcomp = mcesdatclean %>%
mutate(Duration = as.numeric(difftime('Exit.Date', 'Entry.Date',units = "days"))) %>%
group_by(U.S..Military.Veteran) %>%
sumarise(AvgDuration = mean(Duration, na.rm = TRUE))
ggplot(durationcomp, aes(x=as.factor(US..Military.Veteran),
y = AvgDuration, fill = as.factor(US..Military.Veteran))) +
geom_bar(stat = "identity") +
labs(title = "Duration Comparison for Veterans vs. Non-Veterans",
x = "veteran status",
y = "Average Duration (Days)") +
theme_minimal()
durationcomp = mcesdatclean %>%
mutate(Duration = as.numeric(difftime('Exit.Date', 'Entry.Date',units = "days"))) %>%
group_by(U.S..Military.Veteran) %>%
sumarise(AvgDuration = mean(Duration, na.rm = TRUE))
mcesdatclean = mcesdat %>%
filter(!is.na('Entry.Date') & !is.na('Exit.Date'))
housingdests = mcesdatclean %>%
filter(!is.na('Entry.Exit.Desintation') & !is.na('Days.to.Exit.Destination'))
housingdests = mcesdatclean %>%
group_by(U.S..Military.Veteran, Entry.Exit.Destination) %>%
summarise(AvgDaysToExit = mean(`Days.to.Exit.Destination`, na.rm = TRUE))
mcesdatclean = mcesdat %>%
filter(!is.na('Entry.Date') & !is.na('Exit.Date'))
housingdests = mcesdatclean %>%
group_by(U.S..Military.Veteran, Entry.Exit.Destination) %>%
summarise(AvgDaysToExit = mean(`Days.to.Exit.Destination`, na.rm = TRUE))
housingdests = mcesdatclean %>%
group_by('U.S..Military.Veteran', 'Entry.Exit.Destination') %>%
summarise(AvgDaysToExit = mean('Days.to.Exit.Destination', na.rm = TRUE))
mcesdatclean$Days.to.Exit.Destination = as.numeric(mcesdatclean$Days.to.Exit.Destination)
mcesdatclean$Days.to.Exit.Destination = as.numeric(mcesdatclean$Days.to.Exit.Destination)
housingdests = mcesdatclean %>%
group_by('U.S..Military.Veteran', 'Entry.Exit.Destination') %>%
summarise(AvgDaysToExit = mean('Days.to.Exit.Destination', na.rm = TRUE))
mcesdatclean = mcesdat %>%
filter(!is.na('Entry.Date') & !is.na('Exit.Date'))
#Exploring housing destinations and rapidity of housing allocation for veterans.
library(dplyr)
library(ggplot2)
mcesdatclean = mcesdat %>%
filter(!is.na('Entry.Date') & !is.na('Exit.Date'))
mcesdatclean$Days.to.Exit.Destination = as.numeric(mcesdatclean$Days.to.Exit.Destination)
destdat$Days.to.Exit.Destination = as.numeric(mcesdatclean$Days.to.Exit.Destination)
mcesdatclean = mcesdat %>%
filter(!is.na(Entry.Date) & !is.na(Exit.Date))
mcesdatclean = mcesdat %>%
filter(!is.na(Entry.Date) & !is.na(Exit.Date))
mcesdat = read.csv("mces_data20231122.csv")
mcesdatclean = mcesdat %>%
filter(!is.na(Entry.Date) & !is.na(Exit.Date))
mcesdat = read.csv("mces_data20231122.csv")
View(destdat)
# read in datasets
mcesdat = read.csv("mces_data20231122.csv")
destdat = read.csv("destination_data20231122.csv")
surveydat = read.csv("survey_data20231122.csv")
solutionfunddat = read.csv("solutions_fund20231122.csv")
View(surveydat)
View(solutionfunddat)
# read in datasets
mcesdat = read.csv("mces_data20231122.csv")
destdat = read.csv("destination_data20231122.csv")
surveydat = read.csv("survey_data20231122.csv")
solutionfunddat = read.csv("solutions_fund20231122.csv")
#merge data
mergeddat = merge(mcesdat,destdat, by = "Client.ID", all.x = TRUE)
View(mergeddat)
library(dplyr)
suffix_columns = grep("\\.x$|\\.y$", names(mergeddat), value = TRUE)
base_col = sub("\\.x$|\\.y$", "", suffix_col)
for (suffix_col in suffix_columns) {
base_col <- sub("\\.x$|\\.y$", "", suffix_col)
new_col_name <- paste0("Merged_", base_col)
merged_data <- merged_data %>%
mutate(!!new_col_name := coalesce(!!sym(paste0(base_col, ".y")), !!sym(paste0(base_col, ".x")))) %>%
select(-matches(paste0("^", base_col, "\\.(x|y)$")))
}
base_col <- sub("\\.x$|\\.y$", "", suffix_col)
new_col_name <- paste0("Merged_", base_col)
for (suffix_col in suffixcolumns) {
base_col <- sub("\\.x$|\\.y$", "", suffix_col)
new_col_name <- paste0("Merged_", base_col)
mergeddat = mergeddat %>%
mutate(!!new_col_name := coalesce(!!sym(paste0(base_col, ".y")), !!sym(paste0(base_col, ".x")))) %>%
select(-matches(paste0("^", base_col, "\\.(x|y)$")))
}
suffixcolumns = grep("\\.x$|\\.y$", names(mergeddat), value = TRUE)
for (suffix_col in suffixcolumns) {
base_col <- sub("\\.x$|\\.y$", "", suffix_col)
new_col_name <- paste0("Merged_", base_col)
mergeddat = mergeddat %>%
mutate(!!new_col_name := coalesce(!!sym(paste0(base_col, ".y")), !!sym(paste0(base_col, ".x")))) %>%
select(-matches(paste0("^", base_col, "\\.(x|y)$")))
}
